ã€Mongoose ä¸­ä¸ **æ–‡æ¡£æ“ä½œ**ï¼ˆæ’å…¥ã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤ï¼‰åŠå…¶ç›¸å…³åŠŸèƒ½ï¼ˆå­—æ®µç±»å‹ã€éªŒè¯ã€æ¡ä»¶ç­›é€‰ã€æ’åºã€åˆ†é¡µç­‰ï¼‰ç›¸å…³ç¤ºä¾‹ï¼š

---

## ğŸ“‹ ä¸€ã€å­—æ®µç±»å‹å®šä¹‰ï¼ˆSchema Typesï¼‰

```js
const mongoose = require('mongoose')

const userSchema = new mongoose.Schema({
  name: { type: String, required: true },           // å­—ç¬¦ä¸²ï¼Œå¿…é¡»å¡«
  age: { type: Number, min: 0, max: 120 },           // æ•°å­—ï¼Œé™å®šèŒƒå›´
  email: { type: String, unique: true },            // å­—ç¬¦ä¸²ï¼Œå”¯ä¸€
  createdAt: { type: Date, default: Date.now },     // æ—¥æœŸï¼Œé»˜è®¤å€¼
  isActive: { type: Boolean, default: true }        // å¸ƒå°”å€¼
})

const User = mongoose.model('User', userSchema)
```

---

## ğŸ“ äºŒã€æ’å…¥æ–‡æ¡£

### 1. æ’å…¥ä¸€ä¸ªæ–‡æ¡£
```js
User.create({ name: 'Tom', age: 25, email: 'tom@example.com' })
```

### 2. æ‰¹é‡æ’å…¥
```js
User.insertMany([
  { name: 'Alice', age: 30, email: 'alice@example.com' },
  { name: 'Bob', age: 22, email: 'bob@example.com' }
])
```

---

## ğŸ” ä¸‰ã€è¯»å–/æŸ¥è¯¢æ–‡æ¡£

### 1. æŸ¥è¯¢å…¨éƒ¨
```js
User.find()
```

### 2. æ¡ä»¶æŸ¥è¯¢ï¼ˆæ¡ä»¶æ§åˆ¶ï¼‰

```js
User.find({ age: { $gte: 20, $lte: 30 }, isActive: true })
```

å¸¸ç”¨æ¡ä»¶æ§åˆ¶æ“ä½œç¬¦ï¼š
- `$gt`ï¼šå¤§äº
- `$lt`ï¼šå°äº
- `$gte`ï¼šå¤§äºç­‰äº
- `$lte`ï¼šå°äºç­‰äº
- `$ne`ï¼šä¸ç­‰äº
- `$in`ï¼šåŒ…å«åœ¨æ•°ç»„ä¸­
- `$or`ï¼šæˆ–æ¡ä»¶

```js
User.find({ $or: [ { age: { $lt: 20 } }, { isActive: false } ] })
```

---

## ğŸ¯ å››ã€å­—æ®µç­›é€‰ï¼ˆåªè¿”å›éƒ¨åˆ†å­—æ®µï¼‰

```js
User.find({}, 'name email')        // åªè¿”å› name å’Œ email å­—æ®µ
User.find().select('name -_id')    // è¿”å› name å­—æ®µï¼Œä¸è¿”å› _id
```

---

## ğŸ”ƒ äº”ã€æ›´æ–°æ–‡æ¡£

### 1. æ›´æ–°ä¸€ä¸ªæ–‡æ¡£
```js
User.updateOne({ name: 'Tom' }, { $set: { age: 26 } })
```

### 2. æ›´æ–°å¤šä¸ªæ–‡æ¡£
```js
User.updateMany({ isActive: false }, { $set: { isActive: true } })
```

### 3. findOneAndUpdateï¼ˆè¿”å›æ›´æ–°å‰çš„æ–‡æ¡£ï¼‰
```js
User.findOneAndUpdate(
  { email: 'tom@example.com' },
  { $set: { age: 27 } },
  { new: true } // è¿”å›æ›´æ–°åçš„æ–‡æ¡£
)
```

---

## âŒ å…­ã€åˆ é™¤æ–‡æ¡£

### 1. åˆ é™¤ä¸€ä¸ª
```js
User.deleteOne({ name: 'Bob' })
```

### 2. åˆ é™¤å¤šä¸ª
```js
User.deleteMany({ isActive: false })
```

---

## ğŸ”¢ ä¸ƒã€æ’åºã€æˆªå–ï¼ˆåˆ†é¡µï¼‰

### 1. æ’åº
```js
User.find().sort({ age: -1 })  // æŒ‰ age å€’åºï¼ˆ-1ï¼‰ï¼Œå‡åºä¸º 1
```

### 2. è·³è¿‡å‰ N æ¡ï¼ˆskipï¼‰+ å– N æ¡ï¼ˆlimitï¼‰
```js
User.find().skip(10).limit(5)  // ç¬¬ 11~15 æ¡
```

---

## âœ… ç¤ºä¾‹ç»„åˆï¼šåˆ†é¡µ + æ¡ä»¶ + ç­›é€‰ + æ’åº
```js
User.find({ age: { $gt: 18 } })     // æ¡ä»¶
  .select('name age -_id')          // å­—æ®µç­›é€‰
  .sort({ age: 1 })                 // æ’åº
  .skip(0)                          // åˆ†é¡µå¼€å§‹
  .limit(10)                        // æ¯é¡µ10æ¡
```

---